
{% extends "base.html" %}

{%block initial%}
    <h1 class="me-4">Регистрация:</h1>
    <a href="{% url 'index' %}">Новые вопросы</a>
{%endblock%}

{%block content%}

    <form class="w-100" id="questionForm" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div class="form-group row mt-3">
        <label for="email" class="col-sm-3 col-form-label">Почта</label>
        <div class="col-sm-10">
            {{ form.email }}
                {% for error in form.email.errors %}
                  {{ error }}
                 {% endfor %}
        </div>
    </div>
    
   <div class="form-group row mt-3">
       <label for="username" class="col-sm-3 col-form-label">Имя пользователя</label>
       <div class="col-sm-10">
           {{ form.username }}
            {% for error in form.username.errors %}
              {{ error }}
             {% endfor %}
        </div>
    </div>

    <div class="form-group row mt-3">
        <label for="password" class="col-sm-3 col-form-label">Пароль</label>
        <div class="col-sm-10">
            {{ form.password }}
                {% for error in form.password.errors %}
                  {{ error }}
                 {% endfor %}
        </div>
    </div>

    <div class="form-group row mt-3">
        <label for="password2" class="col-sm-3 col-form-label">Повторите пароль</label>
        <div class="col-sm-10">
           {{ form.password2 }}
            {% for error in form.password2.errors %}
              {{ error }}
             {% endfor %}
        </div>
    </div>

    <div class="form-group row mt-3">
        <label for="avatar" class="col-sm-3 col-form-label">Аватарка</label>
        <div class="col-sm-10 d-flex">
            {{ form.avatar }}
            <span class="form-control input-file-val" id="fileLabel">Выберите файл</span>
            <button class="btn btn-success choose-button ms-3" type="button" onclick="document.getElementById('fileInput').click()">
                Выбрать!
            </button>
        </div>
    </div>

<button id='sub-reg-button' class="btn btn-success col-sm-3 mt-5" type="submit">Зарегистрироваться!</button>
</form>

  <script>
    const fileInput = document.getElementById('fileInput');
    const fileLabel = document.getElementById('fileLabel');

    fileInput.addEventListener('change', function() {
        if (fileInput.files.length > 0) {
            fileLabel.textContent = fileInput.files[0].name; // Отображаем имя файла
        } else {
            fileLabel.textContent = 'выберите файл'; // Сбрасываем текст, если файл не выбран
        }
    });
  </script>

{%endblock%}